package com.brnozgn.demo.configurations.mapping;

import org.modelmapper.Converter;
import org.modelmapper.ModelMapper;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

@Configuration
public class ModelMapperConfig {
	@Bean
	public ModelMapper modelMapper() {
		 ModelMapper modelMapper = new ModelMapper();
	        
	        // setId() metodunu Ã¶zel olarak belirtiyoruz
	        Converter<Long, Integer> idConverter = new AbstractConverter<Long, Integer>() {
	            protected Integer convert(Long id) {
	                return id.intValue();
	            }
	        };
	        modelMapper.typeMap(CreateBookRequest.class, Book.class)
	                .addMappings(mapper -> {
	                    mapper.using(idConverter).map(CreateBookRequest::getPublishingHouseId, Book::setId);
	                    mapper.using(idConverter).map(CreateBookRequest::getCategoryId, Book::setId);
	                    mapper.using(idConverter).map(CreateBookRequest::getNovelistId, Book::setId);
	                });
		return new ModelMapper();
	}
}
