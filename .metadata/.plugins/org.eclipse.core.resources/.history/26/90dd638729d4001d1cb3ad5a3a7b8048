package com.brnozgn.demo.business.concretes;

import java.util.UUID;

import org.modelmapper.ModelMapper;
import org.springframework.stereotype.Service;

import com.brnozgn.demo.business.abstracts.PublishingHouseService;
import com.brnozgn.demo.business.constants.Messages;
import com.brnozgn.demo.business.dto.requests.create.CreatePublishingHouseRequest;
import com.brnozgn.demo.business.dto.responses.create.CreatePublishingHouseResponse;
import com.brnozgn.demo.dataAccess.PublishingHouseRepository;
import com.brnozgn.demo.entities.PublishingHouse;
import com.brnozgn.demo.utilities.results.DataResult;
import com.brnozgn.demo.utilities.results.SuccessDataResult;

import lombok.AllArgsConstructor;

@Service
@AllArgsConstructor
public class PublishingHouseManager implements PublishingHouseService {

	private PublishingHouseRepository repository;
	private ModelMapper modelMapper;

	@Override
	public DataResult<CreatePublishingHouseResponse> add(CreatePublishingHouseRequest request) {
		PublishingHouse house = this.modelMapper.map(request, PublishingHouse.class);
		house.setId(UUID.randomUUID().toString());
		this.repository.save(house);
		CreatePublishingHouseResponse response = this.modelMapper.map(house, CreatePublishingHouseResponse.class);
		return new SuccessDataResult<CreatePublishingHouseResponse>(response,Messages.CreatedHouse);
	}

}
